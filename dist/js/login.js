"use strict";require(["config"],function(){require(["jquery","cookie"],function(){var i=$("#uname"),e=$("#pwd");$("#pAgree").change(function(){$("#pAgree").prop("checked")?$("#check-icon").css("opacity","1"):$("#check-icon").css("opacity","0")}),$("#check-icon").click(function(){$("#pAgree").prop("checked")?($("#pAgree").prop("checked",!1),$("#check-icon").css("opacity","0")):($("#pAgree").prop("checked",!0),$("#check-icon").css("opacity","1"))}),e.on("blur",n);function n(){return e.val()?(e.siblings(".input-del").css("display","block"),e.siblings(".input-del").attr("src","/images/load/del.jpg"),!0):(e.siblings(".input-del").css("display","none"),e.siblings(".input-error").text("请设置密码"),!1)}i.on("blur",s);function s(){return $("#uname").val()?($(this).siblings(".input-del").css("display","block"),$(this).siblings(".input-del").attr("src","/images/load/del.jpg"),/^1[3|4|5|8]\d{9}$/.test($("#uname").val())?($("#uname").siblings(".input-error").css("display","none"),$("#uname").siblings(".input-del").attr("src","/images/load/succeed.jpg"),!0):($(this).siblings(".input-del").attr("src","/images/load/del.jpg"),$(this).siblings(".input-error").css("display","block"),void $(this).siblings(".input-error").text("手机号码格式错误"))):($(this).siblings(".input-del").css("display","none"),$(this).siblings(".input-error").text("请填写常用手机号"),!1)}$(".login-form-container").on("click",".input-del",function(){$(this).siblings("input").val("")}),$("#login-btn").on("click",function(c){c.preventDefault();$("#pAgree").prop("checked");var t=i.val(),o=e.val();n()&&s()&&$.ajax({url:"http://10.7.187.147/haituncun/login.php",type:"post",dataType:"json",data:"uname="+t+"&pwd="+o,success:function(i){"landing-error"!==i?$("#pAgree").prop("checked")?($.cookie("username",i.uname,{expires:7,path:"/"}),$.cookie("cart",i.cart,{path:"/"}),location="http://localhost:8080/index.html"):$.cookie("username",i.uname,{path:"/"}):alert("账户或密码有错,请重新登陆")},error:function(){alert("账户或密码有错,请重新登陆")}})})})});