"use strict";require(["config"],function(){require(["template","load"],function(t){console.log("0000"),$.cookie.json=!0;var c=$.cookie("cart")||[];if(console.log(c),0!==c.length){var e=t("cart_template",{products:c});$(".cart_body").html(e),$(".cart_body").on("click",".del",function(){if(confirm("确认删除？")){var t=$(this).parents(".product"),e=o(t.children(".id").text(),c);c.splice(e,1),$.cookie("cart",c,{expires:7,path:"/"}),t.remove(),r()}}),$(".cart_body").on("click",".add,.minus",function(){var t=$(this).parents(".product"),e=o(t.children(".id").text(),c),n=c[e];if($(this).is(".add"))n.amount++;else{if(n.amount<=1)return;n.amount--}$.cookie("cart",c,{expires:7,path:"/"}),t.find(".amount_num").val(n.amount),t.children(".sub").text(n.amount*n.price),r()}),$(".cart_body").on("blur",".amount_num",function(){var t=$(this).parents(".product"),e=o(t.children(".id").text(),c),n=c[e];/^[1-9]\d*$/.test($(this).val())?(n.amount=$(this).val(),$.cookie("cart",c,{expires:7,path:"/"}),t.children(".sub").text(n.amount*n.price),r()):$(this).val(n.amount)}),$(".ck_all").click(function(){var t=$(this).prop("checked");$(".ck_product").prop("checked",t),r()}),$(".ck_product").click(function(){var t=$(".ck_product:checked").length===c.length;$(".ck_all").prop("checked",t),r()})}else $(".cart_body").html('购物车为空，请<a href="/html/list.html">选购商品</a>');function o(t,c){var e=-1;return $.each(c,function(c,o){if(o.id==t)return e=c,!1}),e}function r(){var t=0;$(".ck_product:checked").each(function(c,e){t+=Number($(this).parents(".product").children(".sub").text())}),$(".total .money").text(t.toFixed(2))}})});